<!DOCTYPE html>
<html lang="US-EN">
<meta name="theme-color" content="#fffcf9"/>
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Contain Go"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@nextwavesllc"/>


    i
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-109147161-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-109147161-1');
</script>


  	<meta property="og:title" content="Contain Go &middot; NextWave Solutions" />
  	<meta property="og:site_name" content="NextWave Solutions" />
  	<meta property="og:url" content="https://nextwavesolutions.io/post/containgo/" />

    
        
            <meta property="og:image" content="/images/Love-Coding.png"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2017-09-29T16:53:40-05:00" />

    
    

    <title>Contain Go &middot; NextWave Solutions</title>

    
    <meta name="description" content="So you have just learned Golang, built a webserver, and are ready to show the world what you can do. That&amp;rsquo;s great! Go is a very great language that scales" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://nextwavesolutions.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://nextwavesolutions.io/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="https://nextwavesolutions.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://nextwavesolutions.io/css/nav.css" />

    

    

    
      
          <link href="https://nextwavesolutions.io/index.xml" rel="alternate" type="application/rss+xml" title="NextWave Solutions" />
      
      
    
    <meta name="generator" content="Hugo 0.30.2" />

    <link rel="canonical" href="https://nextwavesolutions.io/post/containgo/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": 
    },
    "author": {
        "@type": "Person",
        "name": "Justyn Temme",
        
        "url": https://nextwavesolutions.io,
        "sameAs": [
            
            
             
             
             
             
             
            
        ],
        "description": Open Source Developer
        
    },
    "headline": Contain Go,
    "name": Contain Go,
    "wordCount": 561,
    "timeRequired": "PT3M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url": https://nextwavesolutions.io/post/containgo/,
    "datePublished": 2017-09-29T16:53Z,
    "dateModified": 2017-09-29T16:53Z,
    
    
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": https://nextwavesolutions.io/post/containgo/
    }
}
    </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/#content">Blog</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/post/about/">About Me</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/post/consulting/">Contracting/Consulting</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/post/whoami/">Who is NextWave?</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/justyntemme/">Github repos</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="https://nextwavesolutions.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">


<link rel="amphtml" href="https://nextwavesolutions.io/amp/containGo">


<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Contain Go</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-09-29T16:53:40-05:00">
            Sep 29, 2017
          </time>
        
         
        </section>
    </header>

    <section class="post-content">
      

<p>So you have just learned Golang, built a webserver, and are ready to show the world what you can do. That&rsquo;s great! Go is a very great language that scales well. In fact, many of the tools used to deliver this web page to you are written in Go. Hugo, a static website generator, was used to build the webpage. A simple Go file server is used to serve the webpage. Docker, the application responsible for containerizing the web server, is also written in go. So how <strong>do</strong> we combine these great Go technologies to deliver a containerized web server? Today, we will attempt to answer that question, as well as teach you some great practices for making website updates relatively easy.</p>

<h3 id="go-webserver">Go Webserver</h3>

<p>Go is great for hosting simple websites that you want to show to the world. You can find many examples of a web server in action. For today I will assume you have a working web server listening on port 8080. Below is an example of a file server sharing the contents of /usr/share/doc.</p>

<pre><code>package main

import (
	&quot;log&quot;
	&quot;net/http&quot;
)

func main() {
	// Simple static webserver:
	log.Fatal(http.ListenAndServe(&quot;:8080&quot;, http.FileServer(http.Dir(&quot;/usr/share/doc&quot;))))
}
</code></pre>

<p>This example can be found <a href="https://golang.org/pkg/net/http/#example_FileServer">here</a></p>

<h3 id="docker-file">Docker File</h3>

<p>Now that you have a working Go file server, and some sort of index.html within /usr/share/doc, it is time to build your docker file. This docker file will be built after every update of the info you have in /usr/share/doc. By hosting your website on github you will be able to take advantage of go get, Golangs command to fetch a remote git repository. Here is an example Docker file. Note: You will need to set your GOROOT on your server to /go and chown /go to the user running the command. You can set this by placing <code>export GOROOT=/go</code> in <code>~/.bashrc</code> after you have created and chowned the directory. Be sure to <code>source ~/.bashrc</code> so your current session knows of the global variable assignment.</p>

<h4 id="dockerfile">Dockerfile</h4>

<pre><code># Sets the docker image base. We will be using the latest golang image to run our web server
FROM golang:latest

# Using Go we are able to go get our webserver/website with one clone request to the repository
RUN go get github.com/myprofile/mywebserverrepo

# go install builds the binary for the web server and moves it into $GOROOT/bin/ 
RUN go install github.com/myprofile/mywebserverrepo

# go get installs the repository to our local /go/src/github/myprofile GOROOT. We will need to copy the web directory to /go/bin so our web server is in the same directory as our web pages
RUN cp -r /go/src/github.com/myprofile/mywebserverrepo/public /go/bin

#expose tells docker we will need to map 8080 to an external port on the machine
EXPOSE 8080

#Entry point tells docker where to start once the docker container is ran. This will be the name of your web server binary after you were to run go build within the directory 
ENTRYPOINT [&quot;webserver&quot;]
</code></pre>

<p>Now that we have our docker file ready we can build the docker image. For easy image management I use Cockpit from the Fedora team. However, there are plenty of ways to manage images and containers how you do it is up to you.</p>

<p><code>docker build . -t mywebserver</code></p>

<p>This will build the docker container and label it mywebserver.</p>

<p>Now to run the webserver</p>

<p><code>docker run -P 8080:80 mywebserver</code></p>

<p>Congratulations! You have now contained a Go web server!</p>

    </section>


  <footer class="post-footer">


    









<section class="author">
  <h4><a href="https://nextwavesolutions.io/">Justyn Temme</a></h4>
  
  <p>Open Source Developer</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">United States of America</span>
    <span class="author-link icon-link"><a href="https://nextwavesolutions.io">https://nextwavesolutions.io</a></span>
  </div>
</section>




    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Contain%20Go&nbsp;-&nbsp;NextWave%20Solutions&amp;url=https%3a%2f%2fnextwavesolutions.io%2fpost%2fcontaingo%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fnextwavesolutions.io%2fpost%2fcontaingo%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fnextwavesolutions.io%2fpost%2fcontaingo%2f&amp;description=Contain%20Go"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fnextwavesolutions.io%2fpost%2fcontaingo%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    







  </footer>
</article>

</main>


  <aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="https://nextwavesolutions.io/post/whatisbitcoin/">
          <section class="post">
              <h2>What is Bitcoin?</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="https://nextwavesolutions.io/post/whyfedora/">
          <section class="post">
              <h2>Why Fedora?</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">NextWave Solutions</a> All rights reserved - 2017</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://nextwavesolutions.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://nextwavesolutions.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://nextwavesolutions.io/js/index.js"></script>
    
</body>
</html>

