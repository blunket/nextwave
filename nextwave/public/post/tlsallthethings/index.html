<!DOCTYPE html>
<html lang="US-EN">
<meta name="theme-color" content="#fffcf9"/>
<head>
    <link rel="manifest" href="manifest.json">

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="TLS (SSL) All the Things!"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@nextwavesllc"/>


    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-109147161-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-109147161-1');
</script>


  	<meta property="og:title" content="TLS (SSL) All the Things! &middot; NextWave Solutions" />
  	<meta property="og:site_name" content="NextWave Solutions" />
  	<meta property="og:url" content="https://nextwavesolutions.io/post/tlsallthethings/" />

    
        
            <meta property="og:image" content="/images/Love-Coding.png"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2017-09-28T19:11:08-05:00" />

    
    

    <title>TLS (SSL) All the Things! &middot; NextWave Solutions</title>

    
    <meta name="description" content="So you have heard about it, you use it, and it also was once an endeavor that could cost quite a bit of cash. Now thanks to Letsencrypt it&amp;rsquo;s easier than e" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://nextwavesolutions.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://nextwavesolutions.io/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css"  href="https://nextwavesolutions.io/css/screen.css" />
    <style>
	

  nav.navpage:after {
    content: ""; clear: both; display: block;
  }

nav.navpage  > ul >  li > a  {
    font-weight: bold;
    text-decoration: none;
    font-size: 1.2em;
    font-variant:  small-caps;
}


nav.navpage ul  {
  padding-left: 0px;
  margin-left: 0px;
}
nav.navpage ul ul li {
  display: block;
  margin-left: 30px;
  line-height: 1.2em;
}
nav.navpage ul ul li a {
  text-decoration: none
}
nav.navpage ul ul li a:hover {
  text-decoration: underline;
}
nav.navpage ul ul li:after {
  content: "";
}

nav.navpage ul ul li ul li{
  display: block;
  font-size: smaller;
  margin-left: 30px;
  line-height: 1.1em;
}

nav.navchildren{
  margin-top: 0px;
  background: #efefef;
  background: linear-gradient(top, #efefef 0%, #bbbbbb 100%);
  background: -moz-linear-gradient(top, #efefef 0%, #bbbbbb 100%);
  background: -webkit-linear-gradient(top, #efefef 0%,#bbbbbb 100%);
  box-shadow: 0px 0px 90px rgba(0,0,0,0.15);
  padding: 0 20px;
  border-radius: 10px;
  list-style: none;
  position: relative;
  display: inline-table;
  width: 100%;
}

nav.navchildren li {
  font-size: smaller;
  line-height: 1.1em;
  font-family: helvetica;
   

}
nav.navchildren a {

  line-height: 1.1em;

  text-decoration: none
}
nav.navchildren  a:hover {
  text-decoration: underline;
}
</style>
    

    

    
      
          <link href="https://nextwavesolutions.io/index.xml" rel="alternate" type="application/rss+xml" title="NextWave Solutions" />
      
      
    
    <meta name="generator" content="Hugo 0.30.2" />

    <link rel="canonical" href="https://nextwavesolutions.io/post/tlsallthethings/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Justyn Temme"
    },
    "author": {
        "@type": "Person",
        "name": "Justyn Temme",
        
        "url": "https://nextwavesolutions.io",
        "sameAs": [
            
            
             
             
             
             
             
            
        ],
        "description": Open Source Developer
        
    },
    "headline": TLS (SSL) All the Things!,
    "name": TLS (SSL) All the Things!,
    "wordCount": 362,
    "timeRequired": "PT2M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url":" https://nextwavesolutions.io/post/tlsallthethings/",
    "datePublished": 2017-09-28T19:11Z,
    "dateModified": 2017-09-28T19:11Z,
    
    
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": https://nextwavesolutions.io/post/tlsallthethings/
    }
}
    </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/#content">Blog</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/post/about/">About Me</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/post/consulting/">Contracting/Consulting</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://nextwavesolutions.io/post/whoami/">Who is NextWave?</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/justyntemme/">Github repos</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="https://nextwavesolutions.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">


<link rel="amphtml" href="https://nextwavesolutions.io/amp/tlsallthethings">


<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">TLS (SSL) All the Things!</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-09-28T19:11:08-05:00">
            Sep 28, 2017
          </time>
        
         
        </section>
    </header>

    <section class="post-content">
      

<p>So you have heard about it, you use it, and it also was once an endeavor that could cost quite a bit of cash. Now thanks to Letsencrypt it&rsquo;s easier than ever to force HTTPS traffic to even static websites on your web server.</p>

<h3 id="letsencrypt">Letsencrypt</h3>

<p>Letsencrypt is a free CA (certificate authority) that let&rsquo;s anyone that owns a domain generate a trusted certificate for that domain. There are many guides to do this, my favorite being our friends at <a href="https://fedoramagazine.org/letsencrypt-now-available-fedora/" title="letsencrypt">Fedora Magazine</a>. Setup the letsencrypt certificate before continuing reading.</p>

<h3 id="apache-letsencrypt">Apache + Letsencrypt</h3>

<p>Now that you have your cert files you will need to move them to the apache key directory.</p>

<ul>
<li>SSLCertificateFile /etc/pki/tls/certs/mydomain.com.crt</li>
<li>SSLCertificateChainFile /etc/pki/tls/certs/mydomain.com.chain.crt</li>
<li>SSLCertificateKeyFile /etc/pki/tls/private/mydomain.com.key</li>
</ul>

<p>After moving the key files to the proper directory, it is time to tell nginx to use SSL, and where the key files are located. The Apache config files are located in /etc/httpd/ . The first config file we will need to edit is the ssl.conf found in /etc/httpd/conf.d/ssl.conf. Here we will tell Apache to listen on port 443 by adding
<code>Listen 443 https</code> to the file head. You will find locations to add the location of your SSL cert files.</p>

<pre><code>SSLCertificateFile /etc/pki/tls/certs/mydomain.com.crt 

SSLCertificateKeyFile /etc/pki/tls/private/mydomain.com.key 

SSLCertificateChainFile /etc/pki/tls/certs/mydomain.com.chain.crt
</code></pre>

<h3 id="apache-letsencrypt-docker">Apache + Letsencrypt + &hellip;&hellip; Docker?</h3>

<p>Now that we have TLS (SSL) enabled with Apache, let&rsquo;s have some fun with reverse proxying and enable ssl to a web server in a docker container. Docker is great for containerizing applications, especially webs ervers. I will assume you have a docker container listening on port 9090 that accepts a normal HTTP connection. We will take advantage of the ability for Apache to seamlessly pass TLS traffic to a local HTTP web server. Back in your ssl.conf file you will need to create a VirtualHost for port 443. An example is given below.</p>

<pre><code>&lt;VirtualHost *:443&gt;
	ServerName		mydomain.com
	SSLEngine		on

	SSLCertificateFile	/etc/pki/tls/certs/mydomain.com.crt
	SSLCertificateChainFile	/etc/pki/tls/certs/mydomain.com.chain.crt
	SSLCertificateKeyFile	/etc/pki/tls/private/mydomain.com.key

	SSLProxyEngine		off
	
	SSLProxyVerify		none
	SSLProxyCheckPeerCN	off
	SSLProxyCheckPeerName	off

	ProxyPreserveHost	on
	ProxyRequests		off
	ProxyPass		/	http://mydomain.com:9090/
	ProxyPassReverse	/	http://mydomain.com:9090/
	
	ErrorLog		/var/log/httpd/mydomain_apache_proxy_https_error.log
&lt;/VirtualHost&gt;	
</code></pre>

<p>Now with a simple <code>sudo systemctl restart httpd</code> you can have a reverse apache proxy serving TLS (SSL) to a standard web server in a docker container.</p>

    </section>


  <footer class="post-footer">


    









<section class="author">
  <h4><a href="https://nextwavesolutions.io/">Justyn Temme</a></h4>
  
  <p>Open Source Developer</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">United States of America</span>
    <span class="author-link icon-link"><a href="https://nextwavesolutions.io">https://nextwavesolutions.io</a></span>
  </div>
</section>




    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=TLS%20%28SSL%29%20All%20the%20Things%21&nbsp;-&nbsp;NextWave%20Solutions&amp;url=https%3a%2f%2fnextwavesolutions.io%2fpost%2ftlsallthethings%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fnextwavesolutions.io%2fpost%2ftlsallthethings%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fnextwavesolutions.io%2fpost%2ftlsallthethings%2f&amp;description=TLS%20%28SSL%29%20All%20the%20Things%21"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fnextwavesolutions.io%2fpost%2ftlsallthethings%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    







  </footer>
</article>

</main>


  <aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="https://nextwavesolutions.io/post/whyfedora/">
          <section class="post">
              <h2>Why Fedora?</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="https://nextwavesolutions.io/post/whoami/">
          <section class="post">
              <h2>Who is NextWave?</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">NextWave Solutions</a> All rights reserved - 2017</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://nextwavesolutions.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://nextwavesolutions.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://nextwavesolutions.io/js/index.js"></script>
    

<script>
    if('serviceWorker' in navigator) {
        navigator.serviceWorker
            .register('/sw.js', { scope: '/' })
            .then(function(registration) {
                console.log('Service Worker Registered');
            });

        navigator.serviceWorker
            .ready
            .then(function(registration) {
                console.log('Service Worker Ready');
            });
    }
</script>
</body>
</html>

